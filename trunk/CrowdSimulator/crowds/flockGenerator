#!/bin/bash

fileName=generatedFlock.txt

touch $fileName

echo "# File generated by flockGenerator script" > $fileName
echo >> $fileName

xCentre=0
zCentre=0

flock=flock4
rows=7
columns=7
brain=jumper
state=jumperFlying
dummy=minion
xHeading=0
yHeading=0
zHeading=-1
visionRadius=4

#percentage over 1
randomRatio=30

#echo "0 0 0 1 2 0.5 8 state verticalLeader $xHeading $yHeading $zHeading $dummy" >> $fileName
#echo "1" >> $fileName
#echo "flock $flock" >> $fileName
#echo >> $fileName

stride=4

startingX=$((xCentre-($columns*$stride/2) + $stride/2))
startingZ=$((zCentre-($rows*$stride/2) + $stride/2))

for ((i=0;i<$columns;++i))
do
	for ((j=0;j<$rows;++j))
	do
		if [ "$randomRatio" -eq 0 ]
		then
			rand=0
		else
			rand=$(($RANDOM%$randomRatio))
		fi
		mass=$(echo "scale=2; 1-($randomRatio/2/100) + $rand / 100" | bc)
		
		if [ "$randomRatio" -eq 0 ]
		then
			rand=0
		else
			rand=$(($RANDOM%$randomRatio))
		fi
		maxStrength=$(echo "scale=2; 1 -($randomRatio/2/100) + $rand / 100" | bc)
		
		if [ "$randomRatio" -eq 0 ]
		then
			rand=0
		else
			rand=$(($RANDOM%$randomRatio))
		fi
		maxSpeed=$(echo "scale=2; 2 -($randomRatio/2/100) + $rand / 100" | bc)
		
		x=$(($startingX + i*$stride))
		z=$(($startingZ + j*$stride))
		echo $x $z
		echo "$x 10 $z $mass $maxStrength $maxSpeed $visionRadius $state $brain $xHeading $yHeading $zHeading $dummy" >> $fileName
		echo "0" >> $fileName
		#echo "1" >> $fileName
		#echo "flock $flock" >> $fileName
		echo >> $fileName
	done
done
