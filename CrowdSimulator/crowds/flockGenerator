#!/bin/bash

fileName=generatedFlock.txt

touch $fileName

echo "# File generated by flockGenerator script" > $fileName
echo >> $fileName

xCentre=0
zCentre=0

flock=flock4
rows=4
columns=4
brain=shooter
state=shooterRun
dummy=droid
xHeading=0
yHeading=0
zHeading=-1
visionRadius=10

#percentage over 1
randomRatio=0

echo "0 0 0 1 2 0.5 8 state verticalLeader $xHeading $yHeading $zHeading $dummy" >> $fileName
echo "1" >> $fileName
echo "flock $flock" >> $fileName
echo >> $fileName

startingX=$((xCentre-($columns/2)))
startingY=$((zCentre-($rows/2)))

for ((i=0;i<$columns;++i))
do
	for ((j=0;j<$rows;++j))
	do
		if [ "$randomRatio" -eq 0 ]
		then
			rand=0
		else
			rand=$(($RANDOM%$randomRatio))
		fi
		mass=$(echo "scale=2; 1-($randomRatio/2/100) + $rand / 100" | bc)
		
		if [ "$randomRatio" -eq 0 ]
		then
			rand=0
		else
			rand=$(($RANDOM%$randomRatio))
		fi
		maxStrength=$(echo "scale=2; 1 -($randomRatio/2/100) / 100" | bc)
		
		if [ "$randomRatio" -eq 0 ]
		then
			rand=0
		else
			rand=$(($RANDOM%$randomRatio))
		fi
		maxSpeed=$(echo "scale=2; 1 -($randomRatio/2/100) + $rand / 100" | bc)
		
		x=$(($startingX + i))
		z=$(($startingZ + j))
		echo "$x 0 $z $mass $maxStrength $maxSpeed $visionRadius $state $brain $xHeading $yHeading $zHeading $dummy" >> $fileName
		echo "1" >> $fileName
		echo "flock $flock" >> $fileName
		echo >> $fileName
	done
done
