#!/bin/bash

fileName=generatedArmy.txt

touch $fileName

echo "# File generated by armyGenerator script" > $fileName
echo >> $fileName

army=army1
brain=warrior
dummy=aragorn

# CENTRAL FRONT FLOCK
xArmyCentre=0
zArmyCentre=30

armyHorizontalStep=15
armyVerticalStep=15
stride=2

armyRows=1
armyColumns=1

flockRows=7
flockColumns=10

xArmyStarting=$(($xArmyCentre - ($armyColumns * $armyHorizontalStep)/2 + $flockColumns*$stride/2))
zArmyStarting=$(($zArmyCentre - ($armyRows * $armyVerticalStep)/2 + $flockRows*$stride/2))

xArmyEnding=$(($xArmyStarting + $armyColumns * $armyHorizontalStep))
zArmyEnding=$(($zArmyStarting + $armyRows * $armyVerticalStep))

for ((xFlockCentre=$xArmyStarting;xFlockCentre<$xArmyEnding;xFlockCentre+=$armyHorizontalStep))
do
	for ((zFlockCentre=$zArmyStarting;zFlockCentre<$zArmyEnding;zFlockCentre+=$armyVerticalStep))
	do
		#CAPTAIN OF THE FLOCK
		echo "$xFlockCentre 0 $zFlockCentre 1 2 0.5 8 captainRun captain 0 0 -1 $dummy" >> $fileName
		echo "2" >> $fileName
		echo "flock $army$xFlockCentre$zFlockCentre" >> $fileName
		echo "army $army" >> $fileName
		echo >> $fileName

		#FLOCK
		xFlockStarting=$(($xFlockCentre - $flockColumns*$stride/2))
		zFlockStarting=$(($zFlockCentre - $flockRows*$stride/2))

		xFlockEnding=$(($xFlockStarting + $flockColumns*$stride))
		zFlockEnding=$(($zFlockStarting + $flockRows*$stride))

		echo flock $xFlockCentre $zFlockCentre

		for ((i=$xFlockStarting;i<$xFlockEnding;i += $stride))
		do
			for ((j=$zFlockStarting;j<$zFlockEnding;j += $stride))
			do
				rand=$(($RANDOM%50))
				mass=$(echo "scale=2; 0.75 + $rand / 100" | bc)
				rand=$(($RANDOM%50))
				maxStrength=$(echo "scale=2; 0.75 + $rand / 100" | bc)
				rand=$(($RANDOM%50))
				maxSpeed=$(echo "scale=2; 2.75 + $rand / 100" | bc)
				echo "$i 0 $j $mass $maxStrength $maxSpeed 6 warriorRun $brain 0 0 -1 $dummy" >> $fileName
				echo "2" >> $fileName
				echo "flock $army$xFlockCentre$zFlockCentre" >> $fileName
				echo "army $army" >> $fileName
				echo >> $fileName
			done	
		done
	done
done
